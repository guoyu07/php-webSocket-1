#!/bin/env php
<?php

require __DIR__ . '/../../../autoload.php';

use inhere\webSocket\client\ClientFactory;

$options = [
    'driver' => '',
    'headers' => [
        'test-name' => 'value'
    ],
    'cookies' => [
        'test' => 'value',
        'test1' => 'value1',
    ]
];

$opts = getopt('', ['driver:']);
$options['driver'] = $opts['driver'] ?? '';
// var_dump($opts);die;
$client = ClientFactory::make('ws://127.0.0.1:9501', $options);

$client->connect();

//$client->send('hello');

echo $client->receive();

$client->close();
